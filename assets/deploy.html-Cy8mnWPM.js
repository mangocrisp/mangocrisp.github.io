import{_ as r,r as e,c as p,a as i,d as a,b as l,w as k,e as n,o as d}from"./app-YJLVW2Ql.js";const o="/assets/images/taybct/structure.png",g={},c={class:"hint-container details"};function y(u,s){const t=e("RouteLink"),h=e("Badge");return d(),p("div",null,[s[11]||(s[11]=i("h1",{id:"项目部署",tabindex:"-1"},[i("a",{class:"header-anchor",href:"#项目部署"},[i("span",null,"项目部署")])],-1)),i("p",null,[s[1]||(s[1]=a("一个稍微大点的项目一般还包括了众多的中间件，所以在部署项目前，请先确保中间件是否正常安装")),l(t,{to:"/ware/soft/"},{default:k(()=>s[0]||(s[0]=[a("中间件安装参考")])),_:1}),s[2]||(s[2]=a("，并且正确配置")),s[3]||(s[3]=i("a",{href:"/code/taybct/get-started/environments"},"环境准备",-1))]),s[12]||(s[12]=n('<h2 id="架构图" tabindex="-1"><a class="header-anchor" href="#架构图"><span>架构图</span></a></h2><figure><img src="'+o+`" alt="架构图" tabindex="0" loading="lazy"><figcaption>架构图</figcaption></figure><h2 id="single" tabindex="-1"><a class="header-anchor" href="#single"><span>Single</span></a></h2><p>单体架构部署比较简单</p><ol><li>将打包好后的<code>jar 包</code>上传到服务器的任意位置（硬盘空间足够）</li><li>在<code>jar 包</code>同级目录下创建<code>config</code>目录，用于存放配置文件，可以将项目的<code>run/src/resources/</code>目录下的所有配置文件都放在这个目录里面</li><li>创建运行文件</li></ol><h2 id="cloud" tabindex="-1"><a class="header-anchor" href="#cloud"><span>Cloud</span></a></h2><p>微服务构架部署和单体类似，只不过是可以在多个服务器，或者是服务器的多个文件夹，或者创建多个启动命令，来达到同时启动多个服务的目的，这只需要配置好了注册中心(Nacos)和配置中心(Nacos)的连接信息就行了</p><p>启动命令，用于启动服务</p><h2 id="linux" tabindex="-1"><a class="header-anchor" href="#linux"><span>Linux</span></a></h2><p>Linux 部署要注意的是，没有图形化的界面，所以一定要做好运维记录，不然后面很难维护</p><h3 id="启动脚本" tabindex="-1"><a class="header-anchor" href="#启动脚本"><span>启动脚本</span></a></h3><details class="hint-container details"><summary>run.sh</summary><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">#!/bin/ash</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 清除之前运行的控制台输出日志</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">echo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">run.jar.out</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 指定jdk的 java 命令，你也可以指定对应的 jdk 版本</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">java</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">java</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 打包好后的jar包名，每个服务的 jar 包名不一样</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">jar</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">run.jar</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 配置 VM 参数</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">vm</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">-Dfile.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">encoding</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">utf-8</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">-Dmaven.wagon.http.ssl.insecure=true </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\\</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">-Dmaven.wagon.http.ssl.allowall=true </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\\</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">--add-opens </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">java.base/java.util=ALL-UNNAMED</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">--add-opens </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">java.base/java.lang=ALL-UNNAMED</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">--add-opens </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">java.base/java.lang.reflect=ALL-UNNAMED</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">--add-opens </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">java.base/java.lang.invoke=ALL-UNNAMED</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">--add-opens </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">java.base/java.lang.io=ALL-UNNAMED</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 配置 Jar 包参数</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">params</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">--spring.profiles.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">active</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">test</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">--spring.cloud.nacos.discovery.server-addr=127.0.0.1:8848 </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\\</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">--spring.cloud.nacos.config.server-addr=127.0.0.1:8848 </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\\</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">--spring.cloud.nacos.username=nacos </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\\</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">--spring.cloud.nacos.password=nacos </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\\</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">--server.port=8080</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 组合成启动命令，后台运行，并且把控制台日志输出到 run.jar.out 文件</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">nohup</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> $java</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> $vm</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -jar</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> $jar</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> $params</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &gt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">run.jar.out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 2&gt;&amp;1 &amp;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>使用<code>nohup</code>在后台运行<code>Jar 包</code></p><p><a href="https://www.runoob.com/linux/linux-comm-nohup.html" target="_blank" rel="noopener noreferrer">参考1</a><br><a href="https://blog.csdn.net/weixin_49114503/article/details/134266408" target="_blank" rel="noopener noreferrer">参考2</a></p><p>如果不想输出日志，只想在后台运行，可以这样配置</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">nohup</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> $java</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> $vm</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -jar</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> $jar</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> $params</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &gt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/dev/null</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 2&gt;&amp;1 &amp;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></details>`,12)),i("details",c,[s[9]||(s[9]=n('<summary>其他参考脚本/命令</summary><ul><li>查看当前 jar 运行的 PID</li></ul><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ps</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -ef</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">grep</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> run.jar</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div>',3)),i("ul",null,[i("li",null,[s[4]||(s[4]=a("查看端口运行的 PID")),l(h,{text:"仅root权限",type:"warning"}),s[5]||(s[5]=i("br",null,null,-1)),s[6]||(s[6]=a(" 有的时候，如果我们需要")),s[7]||(s[7]=i("code",null,"Jar包",-1)),s[8]||(s[8]=a("的时候，发现端口被占用了，想查看一下是什么进程占用了，只可以使用"))])]),s[10]||(s[10]=n(`<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">netstat</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -lnp</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">grep</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> $PORT</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>关闭运行的 jar 包</li></ul><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 通过 ps 找到 pid 后使用</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">kill</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -9</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> $PID</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>查看日志<br> tail -f run.jar.out<br> 可以直接查看控制台日志，也可以查看 <code>./logs/模块名/debug.log</code> | <code>./logs/模块名/info.log</code> | <code>./logs/模块名/warning.log</code>｜ <code>./logs/模块名/error.log</code></li><li>清除日志<br> 如果程序一直运行，run.jar.out 日志会一直不停的增长，所以需要定期清空日志，注意，不要直接删除这个文件，你可以使用以下方法：</li></ul><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">echo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">run.jar.out</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>或者</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">cat</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /dev/null</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">nohup.out</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>也可以考虑使用<code>crontab -e</code>来创建一个系统任务调度<a href="https://www.runoob.com/w3cnote/linux-crontab-tasks.html" target="_blank" rel="noopener noreferrer">参考</a></p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> *</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> *</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /data/jar/clearlog.sh</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><code>clearlog.sh</code></p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">cat</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /dev/null</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">nohup.out</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div>`,11))]),s[13]||(s[13]=n(`<h2 id="windows" tabindex="-1"><a class="header-anchor" href="#windows"><span>Windows</span></a></h2><div class="hint-container tip"><p class="hint-container-title">提示</p><p><code>Windows</code>部署就是查看日志不是很方便，如果可以，推荐你在服务器上安装一个<a href="https://git-scm.com/downloads/win" target="_blank" rel="noopener noreferrer">Git</a>,这样就可以使用<code>GitBash</code>的<a href="https://www.runoob.com/linux/linux-comm-tail.html" target="_blank" rel="noopener noreferrer">tail</a>命令来查看日志了，同时也可以方便后面如果要使用<a href="https://www.jenkins.io/zh/" target="_blank" rel="noopener noreferrer">Jenkins</a>等工具来做自动化部署的时候接取代码，非常好用😘😘😘</p></div><h3 id="启动脚本-1" tabindex="-1"><a class="header-anchor" href="#启动脚本-1"><span>启动脚本</span></a></h3><details class="hint-container details"><summary>run.bat</summary><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">rem</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 配置控制台显示中文（防止乱码）</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">chcp</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 65001</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">rem</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 可以显示当前运行的</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> bat</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 位置到黑窗口上面，方便后续找到运行的</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> jar</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 包的位置</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">set</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> TITLE=%0</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">rem</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 指定jdk的</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> java</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 命令，你也可以指定对应的</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> jdk</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 版本</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">set</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> java=D:</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\\d</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">ev</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\\e</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">nvironment</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\\j</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">dk</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\\j</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">dk-17.0.5</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\\b</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">in</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\\j</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">ava.exe</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">rem</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 打包好后的jar包名，每个服务的</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> jar</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 包名不一样</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">set</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> jar=run.jar</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">rem</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 配置</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> VM</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 参数</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">set</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> vm=-Dfile.encoding=utf-8</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ^</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-Dmaven.wagon.http.ssl.insecure</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">=</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">true</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ^</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-Dmaven.wagon.http.ssl.allowall</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">=</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">true</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ^</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">--add-opens</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> java.base/java.util=ALL-UNNAMED</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ^</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">--add-opens</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> java.base/java.lang=ALL-UNNAMED</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ^</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">--add-opens</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> java.base/java.lang.reflect=ALL-UNNAMED</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ^</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">--add-opens</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> java.base/java.lang.invoke=ALL-UNNAMED</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ^</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">--add-opens</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> java.base/java.lang.io=ALL-UNNAMED</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">rem</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 配置</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Jar</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 包参数</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">set</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> params=--spring.profiles.active=test</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ^</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">--spring.cloud.nacos.discovery.server-addr</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">=127.0.0.1:8848</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ^</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">--spring.cloud.nacos.config.server-addr</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">=127.0.0.1:8848</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ^</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">--spring.cloud.nacos.username</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">=nacos</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ^</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">--spring.cloud.nacos.password</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">=nacos</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ^</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">--server.port</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">=8080</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">rem</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 组合成启动命令</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">%java%</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> %vm%</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -jar</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> %jar%</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> %params%</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">rem</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 这里暂停一下，防止</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Jar</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 包没启动起来，但是黑窗口一闪而过导致找不到错误原因</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">pause</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><h2 id="启动参数说明" tabindex="-1"><a class="header-anchor" href="#启动参数说明"><span>启动参数说明</span></a></h2><details class="hint-container details"><summary>启动参数</summary><p>VM 参数：</p><ul><li><code>-Dfile.encoding=utf-8</code>：配置字符集为 UTF8</li><li><code>-Dmaven.wagon.http.ssl.insecure=true</code>和<code>-Dmaven.wagon.http.ssl.allowall=true</code>：配置允许SSL</li><li><code>--add-opens java.base/**=ALL-UNNAMED</code>：模块化系统配置（JDK17必须，JDK8可以不配置）</li></ul><p>Jar 包参数：</p><ul><li><code>--spring.profiles.active=test</code>：配置环境（测试环境[test]或者生产环境[dev]）</li><li><code>--spring.cloud.nacos.discovery.server-addr=127.0.0.1:8848</code> \\ <code>--spring.cloud.nacos.config.server-addr=127.0.0.1:8848</code> \\ <code>--spring.cloud.nacos.username=nacos</code> \\ <code>--spring.cloud.nacos.password=nacos</code>: 配置 Nacos 连接信息（单体架构可以不配置）</li><li><code>--server.port=8080</code>：配置启动的 Jar 包的端口号</li></ul></details><div class="hint-container info"><p class="hint-container-title">模块化系统配置</p><p>在JDK 17中，<code>java.base</code>模块是<code>Java</code>的核心模块之一，它包含<code>Java</code>运行时所需的基础类。如果启动时遇到“java.base模块不向未命名模块<code>opens java.*</code>”的错误，通常是由于配置问题导致的，<a href="https://developer.baidu.com/article/details/2766430" target="_blank" rel="noopener noreferrer">参考</a>，所以有遇到不能正常加载的模块就只需要往启动参数里面添加<code>--add-opens java.base/xxxx=ALL-UNNAMED</code>就行了</p></div><div class="hint-container info"><p class="hint-container-title">参数配置优先级</p><p>如果是微服务架构，或者是使用了配置中心(Ncos)配置参数，参数配置的优先级如下：</p><p>nacos &gt; 启动参数 &gt; application.yml &gt; bootstrap.yml &gt; @Value(\${key=value})</p></div>`,8))])}const A=r(g,[["render",y],["__file","deploy.html.vue"]]),F=JSON.parse('{"path":"/code/taybct/get-started/deploy.html","title":"项目部署","lang":"zh-CN","frontmatter":{"shortTitle":"项目部署","description":"项目部署","index":true,"comment":true,"article":true,"timeline":true,"lastUpdated":true,"editLink":true,"contributors":true,"order":5,"dir":{"order":5},"icon":"eos-icons:deploy","isOriginal":false,"date":"2024-09-28T00:00:00.000Z","category":["代码笔记"],"tag":["后端","Java","SpringBoot","Spring Taybct","开发框架","快速开始","项目部署"],"head":[["meta",{"property":"og:url","content":"https://mangocrisp.github.io/code/taybct/get-started/deploy.html"}],["meta",{"property":"og:site_name","content":"Mango Crisp"}],["meta",{"property":"og:title","content":"项目部署"}],["meta",{"property":"og:description","content":"项目部署"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://mangocrisp.github.io/assets/images/taybct/structure.png"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-09-28T08:45:47.000Z"}],["meta",{"property":"article:author","content":"Mango Crisp"}],["meta",{"property":"article:tag","content":"后端"}],["meta",{"property":"article:tag","content":"Java"}],["meta",{"property":"article:tag","content":"SpringBoot"}],["meta",{"property":"article:tag","content":"Spring Taybct"}],["meta",{"property":"article:tag","content":"开发框架"}],["meta",{"property":"article:tag","content":"快速开始"}],["meta",{"property":"article:tag","content":"项目部署"}],["meta",{"property":"article:published_time","content":"2024-09-28T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2024-09-28T08:45:47.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"项目部署\\",\\"image\\":[\\"https://mangocrisp.github.io/assets/images/taybct/structure.png\\"],\\"datePublished\\":\\"2024-09-28T00:00:00.000Z\\",\\"dateModified\\":\\"2024-09-28T08:45:47.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Mango Crisp\\",\\"url\\":\\"https://github.com/mangocrisp\\"}]}"]]},"headers":[{"level":2,"title":"架构图","slug":"架构图","link":"#架构图","children":[]},{"level":2,"title":"Single","slug":"single","link":"#single","children":[]},{"level":2,"title":"Cloud","slug":"cloud","link":"#cloud","children":[]},{"level":2,"title":"Linux","slug":"linux","link":"#linux","children":[{"level":3,"title":"启动脚本","slug":"启动脚本","link":"#启动脚本","children":[]}]},{"level":2,"title":"Windows","slug":"windows","link":"#windows","children":[{"level":3,"title":"启动脚本","slug":"启动脚本-1","link":"#启动脚本-1","children":[]}]},{"level":2,"title":"启动参数说明","slug":"启动参数说明","link":"#启动参数说明","children":[]}],"git":{"createdTime":1726308287000,"updatedTime":1727513147000,"contributors":[{"name":"yinxijie","email":"yinxijie@gzgxinfo.com","commits":2},{"name":"XiJieYin","email":"2415446179@qq.com","commits":1}]},"readingTime":{"minutes":5.26,"words":1579},"filePathRelative":"code/taybct/get-started/deploy.md","localizedDate":"2024年9月28日","excerpt":"\\n<p>一个稍微大点的项目一般还包括了众多的中间件，所以在部署项目前，请先确保中间件是否正常安装<a href=\\"/ware/soft/\\" target=\\"_blank\\">中间件安装参考</a>，并且正确配置<a href=\\"/code/taybct/get-started/environments\\">环境准备</a></p>\\n<h2>架构图</h2>\\n<figure><img src=\\"/assets/images/taybct/structure.png\\" alt=\\"架构图\\" tabindex=\\"0\\" loading=\\"lazy\\"><figcaption>架构图</figcaption></figure>"}');export{A as comp,F as data};
